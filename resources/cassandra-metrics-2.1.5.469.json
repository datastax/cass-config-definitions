{
    "meta": {
        "dse_version": "4.7.0",
        "aggregates": {
            "max": "<b>Max</b> - The maximum value recorded during a time interval. A higher maximum value could have occurred without it being recorded.",
            "average": "<b>Avg</b> - The average of values recorded during a time interval.",
            "total": "<b>Total</b> - Sum of the values recorded for each node during a time interval.",
            "min": "<b>Min</b> - The minimal value recorded during a time interval. A lower minimal value could have occurred without it being recorded."
        },
        "include": ["cassandra-metrics-2.0.12.200.json"],
        "exclude":
           ["cf-all-memtables-datasize", "cf-pending-tasks",
            "pending-memory-meter", "active-memory-meter", "completed-memory-meter", "blocked-memory-meter", "total-blocked-memory-meter",
            "pending-repl-on-write-tasks", "active-repl-on-write-tasks", "completed-repl-on-write-tasks", "blocked-repl-on-write-tasks", "total-blocked-repl-on-write-tasks",
            "blocked-flushes",
            "blocked-anti-entropy-stage",
            "blocked-cache-cleanup-stage",
            "blocked-commitlog-archiver",
            "blocked-compaction-executor",
            "blocked-gossip-stage",
            "blocked-hinted-handoff",
            "blocked-internal-response-stage",
            "blocked-memtable-post-flush",
            "blocked-migration-stage",
            "blocked-misc-stage",
            "blocked-mutation-stage",
            "blocked-pending-range-calculator",
            "blocked-read-repair-stage",
            "blocked-read-stage",
            "blocked-request-response-stage",
            "blocked-validation-executor",
            "total-blocked-flushes",
            "total-blocked-anti-entropy-stage",
            "total-blocked-cache-cleanup-stage",
            "total-blocked-commitlog-archiver",
            "total-blocked-compaction-executor",
            "total-blocked-gossip-stage",
            "total-blocked-hinted-handoff",
            "total-blocked-internal-response-stage",
            "total-blocked-memtable-post-flush",
            "total-blocked-migration-stage",
            "total-blocked-misc-stage",
            "total-blocked-mutation-stage",
            "total-blocked-pending-range-calculator",
            "total-blocked-read-repair-stage",
            "total-blocked-read-stage",
            "total-blocked-request-response-stage",
            "total-blocked-validation-executor"]
    },

    "all-pending": {
        "api_key": "all-pending",
        "description": "Aggregate of thread pools pending queues that can be used to identify where things are backing up internally. This doesn't include pending compactions because it includes an estimate outside of the task queue or the hinted hand off queue, which can be in constant state of being on.",
        "group": "cassandra",
        "label": "Task Queues",
        "metrics": [
            "pending-anti-entropy-stage",
            "pending-cache-cleanup-stage",
            "pending-commitlog-archiver",
            "pending-compaction-executor",
            "pending-counter-mutations",
            "pending-flushes",
            "pending-gossip-stage",
            "pending-hinted-handoff",
            "pending-internal-response-stage",
            "pending-memtable-post-flush",
            "pending-migration-stage",
            "pending-misc-stage",
            "pending-mutation-stage",
            "pending-native-transport-requests",
            "pending-pending-range-calculator",
            "pending-read-repair-stage",
            "pending-read-stage",
            "pending-request-response-stage",
            "pending-validation-executor"
        ],
        "plot": "StackedAreas",
        "priority": 25,
        "unit": "tasks"
    },
    "pending-counter-mutations": {
        "aggregation_type": "counter",
        "api_key": "pending-counter-mutations",
        "description": "Pending tasks to execute local counter mutations.",
        "group": "cassandra",
        "label": "TP: Counter Mutations Pending",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=request,scope=CounterMutationStage,name=PendingTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "active-counter-mutations": {
        "aggregation_type": "counter",
        "api_key": "active-counter-mutations",
        "description": "Up to concurrent_counter_writes running tasks that execute local counter mutations.",
        "group": "cassandra",
        "label": "TP: Counter Mutations Active",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=request,scope=CounterMutationStage,name=ActiveTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "completed-counter-mutations": {
        "aggregation_type": "counter",
        "api_key": "completed-counter-mutations",
        "description": "Number of local counter mutations that have been executed.",
        "group": "cassandra",
        "label": "TP: Counter Mutations Completed",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=request,scope=CounterMutationStage,name=CompletedTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "memtable-reclaim-pending": {
        "aggregation_type": "counter",
        "api_key": "memtable-reclaim-pending",
        "description": "Waits for current reads to complete and then frees the memory formerly used by the obsoleted memtables.",
        "group": "cassandra",
        "label": "TP: Memtable Reclaims Pending",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableReclaimMemory,name=PendingTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "memtable-reclaim-active": {
        "aggregation_type": "counter",
        "api_key": "memtable-reclaim-active",
        "description": "Waits for current reads to complete and then frees the memory formerly used by the obsoleted memtables.",
        "group": "cassandra",
        "label": "TP: Memtable Reclaims Active",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableReclaimMemory,name=ActiveTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "completed-memtable-reclaim": {
        "aggregation_type": "counter",
        "api_key": "completed-memtable-reclaim",
        "description": "Waits for current reads to complete and then frees the memory formerly used by the obsoleted memtables.",
        "group": "cassandra",
        "label": "TP: Memtable Reclaims Completed",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableReclaimMemory,name=CompletedTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "active-memtable-post-flush": {
        "aggregation_type": "counter",
        "api_key": "active-memtable-post-flush",
        "description": "Tasks related to the last step in flushing memtables to disk as SSTables. Includes removing unnecessary commitlog files and committing Solr-based secondary indexes.",
        "group": "cassandra",
        "label": "TP: Post Flushes Active",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtablePostFlush,name=ActiveTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "pending-memtable-post-flush": {
        "aggregation_type": "counter",
        "api_key": "pending-post-flushes",
        "description": "Tasks related to the last step in flushing memtables to disk as SSTables. Includes removing unnecessary commitlog files and committing Solr-based secondary indexes.",
        "group": "cassandra",
        "label": "TP: Post Flushes Pending",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtablePostFlush,name=PendingTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "completed-memtable-post-flush": {
        "aggregation_type": "counter",
        "api_key": "completed-memtable-post-flush",
        "description": "Tasks related to the last step in flushing memtables to disk as SSTables. Includes removing unnecessary commitlog files and committing Solr-based secondary indexes.",
        "group": "cassandra",
        "label": "TP: Post Flushes Completed",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtablePostFlush,name=CompletedTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "pending-flushes": {
        "aggregation_type": "counter",
        "api_key": "pending-flushes",
        "description": "Number of memtables queued for the flush process. A flush sorts and writes the memtables to disk.",
        "group": "cassandra",
        "label": "TP: Flushes Pending",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableFlushWriter,name=PendingTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "active-flushes": {
        "aggregation_type": "counter",
        "api_key": "active-flushes",
        "description": "Up to memtable_flush_writers concurrent tasks to flush and write the memtables to disk.",
        "group": "cassandra",
        "label": "TP: Flushes Active",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableFlushWriter,name=ActiveTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "completed-flushes": {
        "aggregation_type": "counter",
        "api_key": "completed-flushes",
        "description": "Number of memtables flushed to disk since the nodes start.",
        "group": "cassandra",
        "label": "TP: Flushes Completed",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=MemtableFlushWriter,name=CompletedTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "pending-commitlog-archiver": {
        "aggregation_type": "counter",
        "api_key": "pending-commitlog-archiver",
        "description": "When commit log archiving is enabled (point in time backups), this thread pool executes the 'archive_command' command after a commit log segment is complete.",
        "group": "cassandra",
        "label": "TP: Commitlog Archiver Pending",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=CommitLogArchiver,name=PendingTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "active-commitlog-archiver": {
        "aggregation_type": "counter",
        "api_key": "active-commitlog-archiver",
        "description": "When commit log archiving is enabled (point in time backups), this thread pool executes the 'archive_command' command after a commit log segment is complete.",
        "group": "cassandra",
        "label": "TP: Commitlog Archiver Active",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=CommitLogArchiver,name=ActiveTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "completed-commitlog-archiver": {
        "aggregation_type": "counter",
        "api_key": "completed-commitlog-archiver",
        "description": "When commit log archiving is enabled (point in time backups), this thread pool executes the 'archive_command' command after a commit log segment is complete.",
        "group": "cassandra",
        "label": "TP: Commitlog Archiver Completed",
        "mbean": "org.apache.cassandra.metrics:type=ThreadPools,path=internal,scope=CommitLogArchiver,name=CompletedTasks",
        "metric_type": "gauge",
        "path": ["Value"],
        "priority": 30,
        "scope": "general",
        "type": "jmx"
    },
    "cf-memtable-offheap": {
        "aggregation_type": "average",
        "alerts_label": "Memtable Off Heap",
        "api_key": "cf-memtable-offheap",
        "is_table_metric": true,
        "description": "Off heap memory used by a table's current memtable.",
        "from_unit": "gbToBytes",
        "group": "cf",
        "label": "TBL: Memtable Off Heap",
        "mbean": "org.apache.cassandra.metrics:type=ColumnFamily,keyspace={keyspace},scope={table},name=MemtableOffHeapSize",
        "metric_type": "gauge",
        "path": ["Value"],
        "scope": "cf",
        "to_unit": "bytesToGb",
        "type": "jmx",
        "render_type": "filesize"
    },
    "cf-all-memtables-heapsize": {
        "aggregation_type": "counter",
        "alerts_label": "Total Memtable Heap Size",
        "api_key": "cf-all-memtables-heapsize",
        "is_table_metric": true,
        "description": "An estimate of the space used in JVM heap memory for all memtables. This includes ones that are currently being flushed and related secondary indexes.",
        "from_unit": "gbToBytes",
        "group": "cf",
        "label": "TBL: Total Memtable Heap Size",
        "mbean": "org.apache.cassandra.metrics:type=ColumnFamily,keyspace={keyspace},scope={table},name=AllMemtablesHeapSize",
        "metric_type": "gauge",
        "path": ["Value"],
        "scope": "cf",
        "to_unit": "bytesToGb",
        "type": "jmx",
        "render_type": "filesize"
    },
    "cf-all-memtables-livedatasize": {
        "aggregation_type": "counter",
        "alerts_label": "Total Memtable Live Data Size",
        "api_key": "cf-all-memtables-livedatasize",
        "is_table_metric": true,
        "description": "An estimate of the space used for 'live data' (off-heap, excluding overhead) for all memtables. This includes ones that are currently being flushed and related secondary indexes.",
        "from_unit": "gbToBytes",
        "group": "cf",
        "label": "TBL: Total Memtable Live Data Size",
        "mbean": "org.apache.cassandra.metrics:type=ColumnFamily,keyspace={keyspace},scope={table},name=AllMemtablesLiveDataSize",
        "metric_type": "gauge",
        "path": ["Value"],
        "scope": "cf",
        "to_unit": "bytesToGb",
        "type": "jmx",
        "render_type": "filesize"
    },
    "cf-all-memtables-offheapsize": {
        "aggregation_type": "counter",
        "alerts_label": "Total Memtable Off-Heap Size",
        "api_key": "cf-all-memtables-offheapsize",
        "is_table_metric": true,
        "description": "An estimate of the space used in off-heap memory for all memtables. This includes ones that are currently being flushed and related secondary indexes.",
        "from_unit": "gbToBytes",
        "group": "cf",
        "label": "TBL: Total Memtable Off-Heap Size",
        "mbean": "org.apache.cassandra.metrics:type=ColumnFamily,keyspace={keyspace},scope={table},name=AllMemtablesOffHeapSize",
        "metric_type": "gauge",
        "path": ["Value"],
        "scope": "cf",
        "to_unit": "bytesToGb",
        "type": "jmx",
        "render_type": "filesize"
    },
    "in-memory-percent-used": {
	"aggregation_type": "average",
	"allow_alerts": "true",
	"api_key": "in-memory-percent-used",
	"description": "The percentage of memory allocated for in-memory tables currently in use.",
	"group": "dse",
	"label": "In-Memory Percent Used",
	"mbean": "com.datastax.bdp:type=core,name=MemoryOnlyStatus",
	"metric_type": "gauge",
	"path": ["MemoryOnlyPercentUsed"],
	"postprocess": ["in-memory-percent-used"],
	"scope": "general",
	"render_type": "percentage",
	"type": "jmx"
    }
}
